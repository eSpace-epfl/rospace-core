<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<launch>

    <!-- Namespaces for spacecrafts -->
    <arg name="ns_chaser" default="cso" />
    <arg name="ns_target" default="swisscube" />

    <!-- Load simulation world -->
	<param name="robot_description" textfile="$(find cso_gnc_sim)/res/models/world.urdf" />

    <!-- Include CSO base definition -->
    <include file="$(find cso_gnc_sim)/launch/cso_base.launch">
        <arg name="ns_chaser" value="$(arg ns_chaser)" />
        <arg name="ns_target" value="$(arg ns_target)" />
    </include>

    <!-- Include TF publishers -->
    <include file="$(find cso_gnc_sim)/launch/tf_publisher_absolute.launch">
        <arg name="ns_chaser" value="$(arg ns_chaser)" />
        <arg name="ns_target" value="$(arg ns_target)" />
    </include>

    <!-- Include Orbit visualization of chaser and target -->
    <node name="rviz_orbit_chaser" pkg="rviz_orbit_node" type="rviz_orbit_node.py" >
        <remap from="oe" to="/$(arg ns_target)/oe" />
        <param name="samples" value="350" />
        <param name="pub_subsampling" value="1000" />
        <param name="color" value="0.5 0.5 0 1" />
    </node>

     <!-- Include Orbit visualization of chaser and target -->
    <node name="rviz_orbit_target" pkg="rviz_orbit_node" type="rviz_orbit_node.py" >
        <remap from="oe" to="/$(arg ns_target)/oe" />
        <param name="samples" value="350" />
        <param name="pub_subsampling" value="1000" />
        <param name="color" value="0 0.5 0.5 1" />
    </node>

    <!-- start rviz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find cso_gnc_sim)/res/rviz/tf_large.rviz" required="true" />

     <!-- Launch Visualizer -->
    <include file="$(find rqt_space_plugins)/launch/rqt_cso.launch">
        <arg name="ns_chaser" value="$(arg ns_chaser)" />
        <arg name="ns_target" value="$(arg ns_target)" />
    </include>

</launch>
